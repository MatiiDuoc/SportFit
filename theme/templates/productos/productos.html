{% extends "base.html" %}

{% block title %}
Gestión de productos
{% endblock %}

{% block navbar %}
{% include "components/admin_navbar.html" %}
{% endblock %}

{% block footer %}
<!-- Dejar vacío para no cargar el footer del cliente -->
{% endblock %}

{% block content %}
{% include "components/modals.html" with modal_id="userModal" %}

<!-- Botón para mostrar la sidebar en pantallas pequeñas -->
<button id="toggleSidebar" class="sm:hidden fixed top-4 left-4 z-50 bg-blue-500 text-white p-2 rounded shadow-lg">
    <i class="fa-solid fa-bars"></i>
</button>
<div class="flex flex-col sm:flex-row min-h-screen">
    <!-- Sidebar -->
    {% include "components/admin_navbar.html" %}
    <div id="mainContent" class="flex-grow p-4 sm:p-6 bg-gray-100 transition-all duration-300 ease-in-out sm:ml-64">
        <h1 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-gray-800">Productos registrados</h1>
        {% include "components/filters-product.html" %}
        <!-- Botón para agregar producto -->
        <div class="mt-4 sm:mt-6 mb-4 flex justify-end">
            <button id="openModal" class="bg-blue-500 text-white px-4 sm:px-6 py-2 rounded hover:bg-blue-600 transition"
                onclick="showModal(
                    'userModal', 
                    'Agregar Producto',
                    `<form id='addProductForm' onsubmit='return validateForm()'>
                        <div class='grid grid-cols-1 sm:grid-cols-2 gap-4'>
                            <div>
                                <label for='product_name' class='block text-sm font-medium text-gray-700'>Nombre del Producto</label>
                                <input type='text' id='product_name' name='product_name' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                            </div>
                            <div>
                                <label for='quantity' class='block text-sm font-medium text-gray-700'>Cantidad</label>
                                <input type='number' id='quantity' name='quantity' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                            </div>
                            <div>
                                <label for='price' class='block text-sm font-medium text-gray-700'>Precio</label>
                                <input type='number' step='0.01' id='price' name='price' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                            </div>
                            <div>
                                <label for='brand' class='block text-sm font-medium text-gray-700'>Marca</label>
                                <input type='text' id='brand' name='brand' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                            </div>
                            <div>
                                <label for='product_image' class='block text-sm font-medium text-gray-700'>Imagen del Producto</label>
                                <input type='file' id='product_image' name='product_image' class='w-full border border-gray-300 rounded-lg p-2 mt-1'>
                            </div>
                            <div>
                                <label for='weight' class='block text-sm font-medium text-gray-700'>Peso</label>
                                <input type='text' id='weight' name='weight' class='w-full border border-gray-300 rounded-lg p-2 mt-1'>
                            </div>
                        </div>
                    </form>`,
                    'Guardar'
                )">
                Agregar Producto
            </button>
        </div>

        <script>
            function validateForm() {
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirm_password').value;

                if (password !== confirmPassword) {
                    alert('Las contraseñas no coinciden.');
                    return false;
                }
                return true;
            }
        </script>
        <!-- Tabla responsiva -->
        <div class="overflow-x-auto bg-white border border-gray-300 rounded-lg shadow-md">
            <table class="min-w-full border-collapse border border-gray-300 rounded-lg overflow-hidden text-sm sm:text-base">
                <thead>
                    <tr class="bg-gray-200 text-gray-700">
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">ID</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Nombre producto</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Cantidad</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Precio</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Marca</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Imagen</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Peso</th>
                        <th scope="col" class="px-2 sm:px-4 py-2 text-left font-semibold border-b border-gray-300">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b hover:bg-gray-100 transition">
                        <td class="px-2 sm:px-4 py-2 text-gray-800">1</td>
                        <td class="px-2 sm:px-4 py-2 text-gray-800">Mancuerna</td>
                        <td class="px-2 sm:px-4 py-2 text-gray-800">4</td>
                        <td class="px-2 sm:px-4 py-2 text-gray-800">26.990</td>
                        <td class="px-2 sm:px-4 py-2 text-gray-800">HWK</td>
                        <td class="px-2 sm:px-4 py-2">
                            <img src="https://via.placeholder.com/40" alt="Producto" class="w-8 h-8 sm:w-10 sm:h-10 rounded-full">
                        </td>
                        <td class="px-2 sm:px-4 py-2 text-gray-800">22kg</td>
                        <td class="px-2 sm:px-4 py-2 flex flex-wrap gap-2">
                            <!-- Botón Ver -->
                            <button
                                class="bg-blue-500 text-white px-2 sm:px-3 py-1 rounded hover:bg-blue-600 transition flex items-center space-x-1"
                                onclick="showModal('userModal', 'Ver Producto', `
                                    <p><strong>ID:</strong> 1</p>
                                    <p><strong>Nombre:</strong> Mancuerna</p>
                                    <p><strong>Cantidad:</strong> 4</p>
                                    <p><strong>Precio:</strong> 26.990</p>
                                    <p><strong>Marca:</strong> HWK</p>
                                    <p><strong>Peso:</strong> 22kg</p>
                                    <img src='https://via.placeholder.com/100' alt='Producto' class='mt-4 rounded'>
                                `, 'Cerrar')">
                                <i class="fa-solid fa-eye"></i>
                                <span>Ver</span>
                            </button>
                            <!-- Botón Editar -->
                            <button
                                class="bg-yellow-500 text-white px-2 sm:px-3 py-1 rounded hover:bg-yellow-600 transition flex items-center space-x-1"
                                onclick="showModal('userModal', 'Editar Producto', `
                                    <form id='editProductForm' onsubmit='return validateForm()'>
                                        <div class='grid grid-cols-1 sm:grid-cols-2 gap-4'>
                                            <div>
                                                <label for='edit_product_name' class='block text-sm font-medium text-gray-700'>Nombre del Producto</label>
                                                <input type='text' id='edit_product_name' name='product_name' value='Mancuerna' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                                            </div>
                                            <div>
                                                <label for='edit_quantity' class='block text-sm font-medium text-gray-700'>Cantidad</label>
                                                <input type='number' id='edit_quantity' name='quantity' value='4' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                                            </div>
                                            <div>
                                                <label for='edit_price' class='block text-sm font-medium text-gray-700'>Precio</label>
                                                <input type='number' step='0.01' id='edit_price' name='price' value='26.990' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                                            </div>
                                            <div>
                                                <label for='edit_brand' class='block text-sm font-medium text-gray-700'>Marca</label>
                                                <input type='text' id='edit_brand' name='brand' value='HWK' class='w-full border border-gray-300 rounded-lg p-2 mt-1' required>
                                            </div>
                                            <div>
                                                <label for='edit_product_image' class='block text-sm font-medium text-gray-700'>Imagen del Producto</label>
                                                <input type='file' id='edit_product_image' name='product_image' class='w-full border border-gray-300 rounded-lg p-2 mt-1'>
                                            </div>
                                            <div>
                                                <label for='edit_weight' class='block text-sm font-medium text-gray-700'>Peso</label>
                                                <input type='text' id='edit_weight' name='weight' value='22kg' class='w-full border border-gray-300 rounded-lg p-2 mt-1'>
                                            </div>
                                        </div>
                                    </form>
                                `, 'Guardar Cambios')">
                                <i class="fa-solid fa-pen"></i>
                                <span>Editar</span>
                            </button>
                            <!-- Botón Eliminar -->
                            <button
                                class="bg-red-500 text-white px-2 sm:px-3 py-1 rounded hover:bg-red-600 transition flex items-center space-x-1"
                                onclick="showModal('userModal', 'Eliminar Producto', `
                                    <p>¿Estás seguro de que deseas eliminar este producto?</p>
                                    <p><strong>Nombre:</strong> Mancuerna</p>
                                    <p><strong>ID:</strong> 1</p>
                                `, 'Eliminar')">
                                <i class="fa-solid fa-trash"></i>
                                <span>Eliminar</span>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% include "components/paginator.html" %}

    </div>
</div>

{% endblock %}
